name: Update Quote of the Day

on:
  schedule:
    - cron: '0 0 * * *'  # This means the action runs every day at midnight (UTC)
  workflow_dispatch:  # Allow manual triggering of the action

jobs:
  update-readme:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout Repository
      uses: actions/checkout@v2

    - name: Fetch Quote
      id: fetch_quote
      run: |
        # Fetch a random quote from an API or file
        curl -s "https://api.quotable.io/random" -o quote.json
        quote=$(jq -r '.content' quote.json)
        author=$(jq -r '.author' quote.json)
        echo "QUOTE=\"$quote\"" >> $GITHUB_ENV
        echo "AUTHOR=\"$author\"" >> $GITHUB_ENV

    - name: Update README
      run: |
        # Update the README with the new quote
        sed -i "/## Quote of the Day/,+3c\\
        ## Quote of the Day\\
        > \"$QUOTE\"\\
        > - $AUTHOR\\
        " README.md

    - name: Commit and Push Changes
      run: |
        git config --global user.name "GitHub Actions"
        git config --global user.email "actions@github.com"
        git add README.md
        git commit -m "Update quote of the day"
        git push
